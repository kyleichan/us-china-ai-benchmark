<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=250,height=400,initial-scale=1,maximum-scale=1,user-scalable=no">
<style>
html,body{margin:0;background:#000;overflow:hidden}
canvas{display:block;width:250px;height:400px;image-rendering:auto}
</style>
</head>
<body>
<canvas id="c" width="250" height="400"></canvas>
<script>
(() => {
  const W = 250, H = 400;
  const canvas = document.getElementById('c');
  const ctx = canvas.getContext('2d', { alpha: false });
  ctx.fillStyle = '#000';
  ctx.fillRect(0,0,W,H);

  const SEED = 1337|0;

  function fnv1a32(str){
    let h = 0x811c9dc5;
    for (let i=0;i<str.length;i++){
      h ^= str.charCodeAt(i);
      h = Math.imul(h, 0x01000193);
    }
    return h|0;
  }
  function xorshift32(seed){
    let x = seed|0;
    return function(){
      x ^= x << 13; x |= 0;
      x ^= x >>> 17;
      x ^= x << 5;  x |= 0;
      return (x >>> 0) / 4294967296;
    };
  }
  const rng = xorshift32((SEED ^ 0x9e3779b9) | 0);

  function fade(t){ return t*t*t*(t*(t*6-15)+10); }
  function lerp(a,b,t){ return a + (b-a)*t; }

  function hash2(ix, iy){
    let h = (ix|0);
    h = Math.imul(h ^ (iy|0), 0x27d4eb2d);
    h ^= SEED;
    h = Math.imul(h ^ (h >>> 15), 0x85ebca6b);
    h = Math.imul(h ^ (h >>> 13), 0xc2b2ae35);
    h ^= (h >>> 16);
    return h|0;
  }
  function grad2(ix, iy){
    const h = hash2(ix,iy);
    const a = ((h >>> 0) / 4294967296) * Math.PI * 2;
    return [Math.cos(a), Math.sin(a)];
  }
  function noise2(x, y){
    const x0 = Math.floor(x), y0 = Math.floor(y);
    const x1 = x0 + 1, y1 = y0 + 1;
    const sx = x - x0, sy = y - y0;

    const g00 = grad2(x0,y0), g10 = grad2(x1,y0), g01 = grad2(x0,y1), g11 = grad2(x1,y1);

    const dx0 = sx,     dy0 = sy;
    const dx1 = sx - 1, dy1 = sy - 1;

    const n00 = g00[0]*dx0 + g00[1]*dy0;
    const n10 = g10[0]*dx1 + g10[1]*dy0;
    const n01 = g01[0]*dx0 + g01[1]*dy1;
    const n11 = g11[0]*dx1 + g11[1]*dy1;

    const u = fade(sx), v = fade(sy);
    const nx0 = lerp(n00, n10, u);
    const nx1 = lerp(n01, n11, u);
    return lerp(nx0, nx1, v);
  }

  function fbm2(x,y,t){
    let f=0, amp=0.55, freq=1.0;
    for (let i=0;i<4;i++){
      f += amp * noise2(x*freq + 37.1*t, y*freq - 19.7*t);
      freq *= 2.02;
      amp *= 0.55;
    }
    return f;
  }

  function curl(x,y,t){
    const eps = 0.0018;
    const n1 = fbm2(x, y+eps, t);
    const n2 = fbm2(x, y-eps, t);
    const a = (n1 - n2) / (2*eps);

    const n3 = fbm2(x+eps, y, t);
    const n4 = fbm2(x-eps, y, t);
    const b = (n3 - n4) / (2*eps);

    return [a, -b];
  }

  const N = 2000;
  const px = new Float32Array(N);
  const py = new Float32Array(N);
  const hue = new Float32Array(N);
  for (let i=0;i<N;i++){
    px[i] = rng()*W;
    py[i] = rng()*H;
    hue[i] = (rng()*360);
  }

  const scale = 0.0125;
  const speed = 55;
  const dt = 1/60;

  let last = performance.now();
  function step(now){
    const t = (now - last) * 0.001;
    last = now;

    ctx.globalCompositeOperation = 'source-over';
    ctx.fillStyle = 'rgba(0,0,0,0.08)';
    ctx.fillRect(0,0,W,H);

    ctx.globalCompositeOperation = 'lighter';
    ctx.lineWidth = 1;
    ctx.lineCap = 'round';

    const time = now * 0.00008;

    for (let i=0;i<N;i++){
      let x = px[i], y = py[i];

      const nx = x * scale;
      const ny = y * scale;

      let v = curl(nx, ny, time);
      const m = Math.hypot(v[0], v[1]) || 1e-9;
      v[0] /= m; v[1] /= m;

      const x2 = x + v[0] * speed * dt;
      const y2 = y + v[1] * speed * dt;

      ctx.strokeStyle = 'hsla(' + hue[i] + ',85%,65%,0.13)';
      ctx.beginPath();
      ctx.moveTo(x, y);
      ctx.lineTo(x2, y2);
      ctx.stroke();

      x = x2; y = y2;

      if (x < -2 || x > W+2 || y < -2 || y > H+2){
        x = (rng()*W);
        y = (rng()*H);
        hue[i] = (hue[i] + 90 + rng()*90) % 360;
      }

      px[i] = x;
      py[i] = y;
      hue[i] = (hue[i] + 0.06) % 360;
    }

    requestAnimationFrame(step);
  }

  requestAnimationFrame(step);
})();
</script>
</body>
</html>